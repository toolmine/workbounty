@model DemoWorkBounty.Workitem
@using System.Net
@using System.Web

@{
    ViewBag.Title = "addworkitem";
    Layout = "~/Views/_LayoutPage1.cshtml";
}

<head>
    <title></title>
    <script src="~/assets/js/datepicker.js"></script>

    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.min.js")" type="text/javascript"></script>
    <script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
</head>
<h2></h2>



<div class="col-xs-8">
    <h4 class="widget-title lighter smaller">
        <i class="ace-icon"></i> Add work item

    </h4>
</div>
<div class="row">
    <div class="col-xs-12">

        <form class="form-horizontal" role="form" data-toggle="validator" name="Workitemform">
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-1"> Title <span style="color:red;">*</span></label>

                <div class="col-sm-9">
                    <input type="text" id="Title" placeholder="" class="col-xs-10 col-sm-5" />
                    @*@Html.ValidationMessageFor(model => model.Title)*@
                </div>
            </div>

            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-1"> Summary<span style="color:red;">*</span> </label>

                <div class="col-sm-9">
                    <textarea rows="4" id="Summary" class="col-xs-10 col-sm-5"></textarea>
                    @*@Html.ValidationMessageFor(model => model.Summary)*@
                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-1"> Start date<span style="color:red;">*</span></label>

                <div class="col-sm-9">
                    <input type="date" id="StartDate" placeholder="Start Date" class="col-xs-10 col-sm-5" />
                    @*@Html.ValidationMessageFor(model => model.StartDate)*@
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-1"> Expected completion date<span style="color:red;">*</span></label>
                <div class="col-sm-9">


                    <input type="date" id="DueDate" placeholder="Expected completion date" class="col-xs-10 col-sm-5" />
                    @*@Html.ValidationMessageFor(model => model.DueDate)*@
                </div>
            </div>


            <div class="form-group">
                <label for="form-field-select-3" class="col-sm-3 control-label no-padding-right">Published to</label>


                <div class="col-sm-9">
                    @Html.DropDownList("TeamName1")
                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-1">Addition attachments  </label>
                <div class="col-sm-9">
                    <input multiple="" type="file" id="myFile" />

                </div>
            </div>


            <div class="form-group">
                <label class="col-sm-3 control-label no-padding-right" for="form-field-1"> Rewards<span style="color:red;">*</span></label>


                <div class="col-sm-9">
                    <div class="hidden-sm hidden-xs btn-group">

                        <button type="button" class="btn btn-minier btn-purple bigger-110" data-toggle="modal" data-target="#myModal">Reward Options</button>



                        <div class="container">

                            <div class="modal" id="myModal" role="dialog">
                                <div class="modal-dialog modal-lg">

                                    <!-- Modal content-->
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                                            <h4 class="modal-title">Reward Options</h4>
                                        </div>
                                        <div class="modal-body">
                                            <table>
                                                <tr>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="Visa" id="1" />
                                                        <span class="lbl"><img src="~/img/VISA_Logo.png" class="imgpopup"></span>
                                                    </td>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="McDonald's" id="2" />
                                                        <span class="lbl"><img src="~/img/McDonald's_Golden_Arches.svg.png" class="imgpopup"></span>
                                                    </td>

                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="PayTM" id="3" />
                                                        <span class="lbl"><img src="~/img/VFsaWo_G.jpeg" class="imgpopup" /></span>
                                                    </td>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="Google Wallet" id="4" />
                                                        <span class="lbl"><img src="~/img/GoogleWallet.png" class="imgpopup" /></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="PayPal" id="5" />
                                                        <span class="lbl"> <img src="~/img/Paypal_2014_logo.png" class="imgpopup" /></span>
                                                    </td>


                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="American Express" id="6" />
                                                        <span class="lbl"><img src="~/img/americanexpress.jpg" class="imgpopup" /></span>
                                                    </td>

                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="Western Union" id="7" />
                                                        <span class="lbl"><img src="~/img/Western-Union-logo-old.jpg" class="imgpopup" /></span>
                                                    </td>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="WePay" id="8" />
                                                        <span class="lbl"><img src="~/img/Wepay_Logo_.png" class="imgpopup" /></span>
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="Bitcoin" id="9" />
                                                        <span class="lbl"><img src="~/img/bitcoin.jpg" class="imgpopup" /></span>
                                                    </td>

                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="Amazon" id="10" />
                                                        <span class="lbl"><img src="~/img/amazon-dgmag.png" class="imgpopup" /></span>
                                                    </td>

                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="Dominos" id="11" />
                                                        <span class="lbl"><img src="~/img/2000px-Dominos_pizza_logo.svg.png" class="imgpopup" /></span>
                                                    </td>
                                                    <td>
                                                        <input name="formfieldradio" type="radio" class="" value="ShoppersShop" id="12" />
                                                        <span class="lbl"><img src="~/img/shoppersshop.jpg" class="imgpopup" /></span>
                                                    </td>
                                                </tr>
                                            </table>

                                            <label for="form-field-1"> Amount <span style="color:red;">*</span></label>
                                            <label>
                                                <input type="text" id="amount" placeholder="" />
                                            </label>

                                            <input type="button" class="btn btn-info btn-xs ace-icon fa fa-check bigger-110" id="btn" value="Save" />
                                            <input type="reset" class="btn btn-xs ace-icon fa fa-undo bigger-110" value="Reset" />

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div id="result"></div>


            <div class="form-group">

                <label class="col-sm-3 control-label no-padding-right" for="form-field-1"></label>
                <div class="col-sm-9">
                    <div class="clearfix">
                        <input type="hidden" id="Userid" value="@Session["UserID"]" />
                        <button class="btn btn-info" type="submit" onclick="AddWorkitem(); return false;">
                            <i class="ace-icon fa fa-check bigger-110"></i>
                            Submit
                        </button>

                        <button class="btn btn-info" type="button">
                            <i class="ace-icon fa fa-file bigger-110"></i>
                            Save
                        </button>


                        <button class="btn" type="reset">
                            <i class="ace-icon fa fa-undo bigger-110"></i>
                            Reset
                        </button>

                    </div>
                </div>
            </div>
        </form>
    </div>
</div>






<script type="text/javascript">
    var radioValue;
    var amount;
    var filepath;

    $(document).ready(function () {

        $("#btn").click(function () {

            var radioValue = $("input[name='formfieldradio']:checked").val();
            var amount = $("#amount").val();
            sessionStorage.setItem('key1', radioValue);
            sessionStorage.setItem('key2', amount);
            $("#myModal").fadeOut();
        });
    });



    function AddWorkitem() {

        var d = new Date();
        var item = {
            "Title": $("#Title").val(),
            "Summary": $("#Summary").val(),
            "StartDate": $("#StartDate").val(),
            "DueDate": $("#DueDate").val(),
            "PublishedTo": $("#TeamName1").val(),
            "DocumentFilePath": document.getElementById("myFile").value,
            "ProposedReward": sessionStorage.getItem('key1'),
            "Amount": sessionStorage.getItem('key2'),
            "CreatedBy": document.getElementById("Userid").value,
            "CreatedDateTime": d.toDateString(),
            "ModifyBy": document.getElementById("Userid").value,
            "ModifyDateTime": d.toDateString(),
            "Status": true,
            "Remarks": "Good",
            "IsOpenForGroup": true
        };
       
        $.ajax({
            type: "POST",
            url: '/api/AddWorkitem/',
            data: JSON.stringify(item),
            contentType: "application/json;charset=utf-8",
            processData: true,
            success: function (data, status, xhr) {
                alert("The result is : " + status);
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    }
</script>







