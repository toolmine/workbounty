@{
    ViewBag.Title = "addteam";
    Layout = "~/Views/_LayoutPage1.cshtml";
}
@*<script src="~/assets/js/jquery_addTeam.js"></script>*@
<script type="text/javascript">
    $(document).ready(function () {
        $("#recent-box1").hide(),
        $.getJSON("/api/AddTeamMember/",

       function (Data) {

       });

    });
    function add(item) {


        var id = $(item).attr("id");
        var memberData = {
            "UserID": id,
            "IsActive": true,
            "TeamName": $("#txtTeamName").val(),
            "TeamUserInfoID": $("#Userid").val()
        };
        debugger;

        $.ajax({
            url: "/Api/DisplayReward/AddMemberData/",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(memberData),
            dataType: "json",
            success: function (response) {
                alert("Member Added ")
                item.remove()
            },

            error: function (x, e) {
                alert("Error");


            }
        });



    }


    function show() {
        $("#simple-table tr").remove();
        var id = $('#itId').val();
        $.getJSON("/api/AddTeamMember/" + id,

                function (Data) {
                    $("#simple-table").append('<tr><th>Member Name</th><th>Email</th><th>Action</th></tr>');
                    var arrayLength = Data.length;
                    for (var i = 0; i < arrayLength; i++) {
                        $("#simple-table").append('<tr><td>' + Data[i].FirstName + '</td><td>' + Data[i].Email + '</td><td><input type="button" id=' + Data[i].UserID + ' value="Add Member" onclick="add(this); return false;" class="btn btn-minier btn-purple" /></td></tr>');
                    }


                })

            .fail(

                function (jqXHR, textStatus, err) {

                    alert('Error: ' + err);

                });

    }


    function submit() {

        var teamData = {
            "TeamName": $("#txtTeamName").val(),
            "UserID": $("#Userid").val(),
            "IsActive": false,
            "TeamUserInfoID": $("#Userid").val()
        };


        $.ajax({
            url: "/Api/AddTeamMember/AddTeamData/",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(teamData),
            dataType: "json",
            success: function (response) {
                alert("Team Added ")
                $("#recent-box1").show()
            },

            error: function (x, e) {
                alert("Error");


            }
        });


    }


</script>

<h2>add team</h2>

<body id="body">
    <div class="col-sm-10">
        <div class="widget-box transparent" id="recent-box">
            <div class="widget-header">
                <div class="col-xs-8">
                    <h4 class="widget-title lighter smaller">
                       Add Teams
                    </h4>
                </div>

                <div class="row">
                    <div class="col-md-5"></div>
                    <div class="col-sm-9">
                        <input type="text" id="txtTeamName" placeholder="" class="col-xs-10 col-sm-5" />&nbsp;
                        <input type="hidden" id="Userid" value="@Session["UserID"]" />
                        <input type="hidden" id="Teamid" value="@Session["Team"]" />
                        <input type="button" value="Submit" onclick="submit();" class="btn btn-minier btn-success">

                    </div>
                </div>
            </div>

        </div>
    </div>

    <div class="col-sm-10">
        <div class="widget-box transparent" id="recent-box1">
            <div class="widget-header">
                <div class="col-xs-8">
                    <h4 class="widget-title lighter smaller">
                      Add Member

                    </h4>
                </div>

                <div class="row">
                    <div class="col-md-1"></div>
                    <div class="col-sm-9">
                        <input type="text" id="itId" size="5" class="col-xs-10 col-sm-5" />&nbsp;
                        <input type="hidden" id="Searchid" value="@Session["UserID"]" />
                        <input type="button" value="Search" onclick="show();" class="btn btn-minier btn-purple" /> &nbsp;
                        </div>
                            <div class=".col-xs-4.col-sm-2 no-padding-right">
                                <div class="col-xs-4">
                                    <table id="simple-table" class="table table-striped table-bordered table-hover">

                                        <tbody id="items"></tbody>

                                    </table>
                                </div>
                            </div>
                        </div>


            </div>
        </div>
    </div>
      
</body>