@model List<DemoWorkBounty.Workitem>
@{
    ViewBag.Title = "detailWorkitem";
    Layout = "~/Views/_LayoutPage1.cshtml";
}

<div class="col-sm-10">
@foreach (var item in Model)
{
    <input type="hidden" id="Workid" value="@item.WorkitemID" />
    <div class="widget-box transparent" id="recent-box">
     
        <div class="widget-header">
     
                 <h4 class="widget-title lighter smaller">
              @Html.DisplayFor(a => item.Title)
            </h4>

        </div>

       
        <div>

        </div>
      
        <div class="widget-header">
            <h4 class="widget-title lighter smaller">
                Details
            </h4>
            <div>
           
                @Html.DisplayFor(a => item.Summary)
            </div>

        </div>
        <div>
            <input type="hidden" id="Userid" value="@Session["UserID"]" />
            <table id="simple-table" class="table table-striped table-bordered table-hover">
                <thead>
                    <tr>


                        <th width="10%">Start Date</th>
                        <th width="10%">Due Date</th>
                        <th width="10%">Rewards</th>
                        <th width="10%">Amount</th>
                        <th width="10%">Status</th>
                        <th width="10%">Action</th>
                        <th width="10%"></th>

                    </tr>
                </thead>
               
                   
                    
                        <tbody>
                            <tr>
                                <td>@Html.DisplayFor(a => item.StartDate)</td>
                                <td>@Html.DisplayFor(a => item.DueDate)</td>
                                <td>@Html.DisplayFor(a => item.ProposedReward)</td>
                                <td>@Html.DisplayFor(a => item.Amount)</td>
                                <td>@Html.DisplayFor(a => item.Status)</td>
                                <td><select id="open">
                                        <option value="0">Open</option>
                                        <option value="1">Exclusive</option>
                                        
                                    </select></td>
                                    <td><input type="submit" value="Submit" onclick="register()" class="btn btn-minier btn-purple" /></td>
                                 @*<td>@Html.ActionLink("Submit", "AfterLogin", "Home", new {@class = "btn btn-minier btn-purple"}) </td>*@
                            </tr>
                          </tbody>
            </table>
        </div>
    </div>
    }
</div>


<script type="text/javascript">
    function register() {

        var item = {
            "WorkitemID": document.getElementById("Workid").value,
            "UserID": document.getElementById("Userid").value,
            "IsExclusive": document.getElementById("open").value,
            "IsFavourite": false,
            "IsRegistered": true
        };

        $.ajax({
            type: "POST",
            url: "/api/openworkitem/addapply/",
            data: JSON.stringify(item),
            dataType: "json",
            contentType: "application/json;charset=utf-8",
            processData: true,
            success: function (data, status, xhr) {
                alert("The result is : " + status);
            },
            error: function (xhr) {
                alert(xhr.responseText);
            }
        });
    }


 </script>