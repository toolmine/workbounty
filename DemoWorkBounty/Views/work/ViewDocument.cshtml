@model List<DemoWorkBounty.WorkItemAssignment>
@{
    ViewBag.Title = "ViewDocument";
    Layout = "~/Views/_LayoutPage1.cshtml";
}
<script type="text/javascript">
    function ApplyReward(item) {
        var id = {
            "UserID": $(item).attr("id"),
            "WorkitemID": $("#Workid").val(),

        };

        $.ajax({
            url: "/work/PayReward/",
            type: "POST",
            contentType: "application/json;charset=utf-8",
            data: JSON.stringify(id),
            dataType: "json",
            success: function (response) {
                if (response == "Success") {
                    alert("Success");
                    window.location.href = "/Home/Afterlogin/";
                }
            },

            error: function (x, e) {
                alert("Error");


            }
        });

    }
</script>

<h2>View Document</h2>
<div class="col-sm-10">

    @*<h4 class="widget-title lighter smaller">
        @Html.DisplayFor(s =>i.Workitem.Title)
    </h4>*@


</div>

<div>
    @*@Html.DisplayFor(s => i.Summary)*@
</div>

<div>

</div>


<div class="row">
     <h4 class="widget-title lighter smaller">
            Details
        </h4>
    @if (ViewBag.displayMessage == null)
    {
        <div class="col-sm-10">
            <p class="ui-icon-alert alert-success">
                You have already send a reward for this workitem
            </p>
        </div>
    }
  </div>
<div class="row"> 
    <div>
        <h3>Work</h3>
        <table id="simple-table" class="table table-striped table-bordered table-hover">
            <thead>
                <tr>

                    <th width="10%">Sr No</th>
                    <th width="10%">Name</th>
                    <th width="10%">Update Time</th>
                    <th width="10%">View File</th>
                    <th width="10%">Reward</th>

                </tr>
            </thead>
            @if (ViewBag.dataForOpen != null)
            {
                foreach (DemoWorkBounty.Models.ViewDocuments i in ViewBag.dataForOpen)
                {

                    <tbody>
                        <tr>
                            <td>@(ViewBag.dataForOpen.IndexOf(i) + 1)</td>
                            <td>@Html.DisplayFor(a => i.FirstName)</td>
                            <td>@Html.DisplayFor(a => i.SubmissionDateTime) <input type="hidden" id="Workid" value="@i.WorkItemID" /></td>
                            <td>@Html.ActionLink("Download", "Download", "work", new { id = i.UserID }, new { @class = "btn btn-minier btn-purple" }) </td>
                            <td><input type="button" id="@i.UserID" class="btn btn-minier btn-purple" value="Assign Reward" onclick="ApplyReward(this);" /></td>
                        </tr>
                    </tbody>
                }
            }
        </table>
    </div>
</div>
   